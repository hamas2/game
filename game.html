<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اللعب - ماذا لو؟</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #000000;
            --secondary: #1a1a1a;
            --accent: #ffd700;
            --text: #ffffff;
            --correct: #4CAF50;
            --wrong: #F44336;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Tajawal', sans-serif;
        }
        
        body {
            background-color: var(--primary);
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="1" fill="%23ffd700" opacity="0.5"/></svg>');
            color: var(--text);
            min-height: 100vh;
        }
        
        .container {
            width: 90%;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem 0;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
        }
        
        .back-btn {
            background: transparent;
            color: var(--text);
            border: 1px solid var(--accent);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .back-btn:hover {
            background: rgba(255, 215, 0, 0.1);
            transform: translateX(-5px);
        }
        
        .stage-info {
            text-align: center;
            flex-grow: 1;
        }
        
        .stage-title {
            font-size: 1.5rem;
            color: var(--accent);
        }
        
        .progress-container {
            width: 100%;
            background: var(--secondary);
            height: 10px;
            border-radius: 5px;
            margin: 1rem 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: var(--accent);
            border-radius: 5px;
            transition: width 0.5s ease;
        }
        
        .question-container {
            background: var(--secondary);
            padding: 2rem;
            border-radius: 10px;
            margin: 2rem 0;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }
        
        .question-text {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            line-height: 1.6;
        }
        
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }
        
        .option {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }
        
        .option:hover {
            background: rgba(255, 215, 0, 0.1);
            border-color: var(--accent);
        }
        
        .option.correct {
            background: rgba(76, 175, 80, 0.2);
            border-color: var(--correct);
        }
        
        .option.wrong {
            background: rgba(244, 67, 54, 0.2);
            border-color: var(--wrong);
        }
        
        .option-icon {
            margin-left: 10px;
            font-size: 1.2rem;
        }
        
        .next-btn {
            background: var(--accent);
            color: var(--primary);
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            display: block;
            margin: 2rem auto 0;
            transition: all 0.3s ease;
        }
        
        .next-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
        }
        
        .next-btn.hidden {
            display: none;
        }
        
        .result-container {
            text-align: center;
            margin-top: 2rem;
            padding: 2rem;
            background: var(--secondary);
            border-radius: 10px;
            border: 1px solid var(--accent);
            display: none;
        }
        
        .result-title {
            font-size: 2rem;
            color: var(--accent);
            margin-bottom: 1rem;
        }
        
        .result-score {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .result-message {
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .action-btn {
            background: transparent;
            color: var(--accent);
            border: 1px solid var(--accent);
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .action-btn:hover {
            background: rgba(255, 215, 0, 0.1);
        }
        
        .action-btn.primary {
            background: var(--accent);
            color: var(--primary);
        }
        
        .action-btn.primary:hover {
            background: #e6c300;
        }
        
        @media (max-width: 768px) {
            .question-text {
                font-size: 1.3rem;
            }
            
            .question-container {
                padding: 1.5rem;
            }
            
            .action-buttons {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .action-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <button class="back-btn" id="backBtn">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="stage-info">
                <div class="stage-title" id="stageTitle">المرحلة 1</div>
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
            </div>
            <div style="width: 40px;"></div>
        </header>
        
        <div class="question-container">
            <div class="question-text" id="questionText"></div>
            <div class="options-container" id="optionsContainer"></div>
            <button class="next-btn hidden" id="nextBtn">السؤال التالي <i class="fas fa-arrow-left"></i></button>
        </div>
        
        <div class="result-container" id="resultContainer">
            <h2 class="result-title" id="resultTitle">أحسنت!</h2>
            <div class="result-score" id="resultScore"></div>
            <p class="result-message" id="resultMessage"></p>
            <div class="action-buttons">
                <button class="action-btn primary" id="restartBtn">
                    <i class="fas fa-redo"></i> إعادة اللعب
                </button>
                <button class="action-btn" id="stagesBtn">
                    <i class="fas fa-layer-group"></i> قائمة المراحل
                </button>
            </div>
        </div>
    </div>

    <script>
        // جميع الأسئلة (150 سؤال مقسمة على 15 مرحلة)
        const allQuestions = {
            stage1: [
                {
                    question: "ماذا لو كان البشر لا يحتاجون للنوم؟",
                    options: [
                        "لأصبحت المدن تعمل 24 ساعة",
                        "لزادت ساعات العمل بشكل كبير",
                        "لتغيرت تصميم المنازل بدون غرف نوم",
                        "كل ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو اختفت الإنترنت فجأة؟",
                    options: [
                        "لانهارت البورصات العالمية",
                        "لعاد الناس للتواصل المباشر",
                        "لتوقفت معظم الخدمات الحديثة",
                        "جميع ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو اكتشفنا حياة ذكية على المريخ؟",
                    options: [
                        "لتغيرت مفاهيمنا عن الحياة في الكون",
                        "لزادت ميزانيات أبحاث الفضاء",
                        "لنشأت أزمات دينية وفلسفية",
                        "كل ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو استطعنا قراءة الأفكار؟",
                    options: [
                        "لانتهت الجرائم تقريباً",
                        "لتغيرت العلاقات الاجتماعية جذرياً",
                        "لاختفت الخصوصية تماماً",
                        "جميع ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو اختفت المال من العالم؟",
                    options: [
                        "لعاش الناس بنظام المقايضة",
                        "لتغير مفهوم القيمة تماماً",
                        "لانهارت الحكومات والبنوك",
                        "كل ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو عاش البشر 200 سنة؟",
                    options: [
                        "لزادت فترة التعليم والعمل",
                        "لتغيرت هرمات الأعمار في المجتمعات",
                        "لأصبحت الشيخوخة مختلفة تماماً",
                        "جميع ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو اختفت الجاذبية الأرضية لمدة يوم؟",
                    options: [
                        "لطارت الأجسام غير المثبتة في الهواء",
                        "لتعطلت أنظمة الطقس تماماً",
                        "لأصبح التنقل مستحيلاً",
                        "كل ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو استطعنا السفر عبر الزمن؟",
                    options: [
                        "لأصبح التاريخ مادة قابلة للتعديل",
                        "لنشأت مفارقات زمنية غريبة",
                        "لأصبحت الجرائم مستحيلة",
                        "جميع ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو انقرضت فجأة جميع الحشرات؟",
                    options: [
                        "لانهارت النظم البيئية",
                        "لتأثرت الزراعة بشدة",
                        "لاختفت العديد من النباتات",
                        "كل ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو كان للحيوانات لغة مفهومة مثل البشر؟",
                    options: [
                        "لأصبحت حدائق الحيوان أماكن مختلفة",
                        "لتغيرت نظرتنا للحقوق الحيوانية",
                        "لأصبحت الزراعة أكثر تعقيداً",
                        "جميع ما سبق"
                    ],
                    correct: 3
                }
            ],
            stage2: [
                {
                    question: "ماذا لو كانت الأرض مسطحة حقاً؟",
                    options: [
                        "لاختفت الجاذبية بالشكل الذي نعرفه",
                        "لأصبحت الرحلات الجوية مختلفة تماماً",
                        "لتغيرت أنماط الطقس جذرياً",
                        "كل ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو لم يكتشف البشر النار؟",
                    options: [
                        "لبقي البشر يعيشون على الطعام النيء",
                        "لتأخر تطور الحضارة آلاف السنين",
                        "لما تطورت الصناعات المعدنية",
                        "جميع ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو كان للبشر ذيول؟",
                    options: [
                        "لتغير تصميم الملابس والأثاث",
                        "لأصبحت لغة الجسد أكثر تعقيداً",
                        "لظهرت رياضات جديدة تعتمد على الذيل",
                        "كل ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو كانت النباتات تمشي؟",
                    options: [
                        "لأصبحت المدن أكثر اخضراراً",
                        "لتغيرت الزراعة تماماً",
                        "لظهرت أنظمة جديدة لتربية النباتات",
                        "جميع ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو كان الماء مشتعلاً؟",
                    options: [
                        "لأصبحت الحياة مستحيلة",
                        "لتغيرت الكيمياء تماماً",
                        "لاختفت المحيطات والأنهار",
                        "كل ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو كان الهواء مرئياً بوضوح؟",
                    options: [
                        "لأصبحت الرؤية محدودة جداً",
                        "لرأينا الأعاصير والرياح بوضوح",
                        "لتغيرت تجربة الطيران تماماً",
                        "جميع ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو كانت الأرض تدور بسرعة أكبر؟",
                    options: [
                        "لأصبحت الأيام أقصر",
                        "لقلت الجاذبية على سطح الأرض",
                        "لازدادت قوة الأعاصير والعواصف",
                        "كل ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو كان للقمر غلاف جوي مثل الأرض؟",
                    options: [
                        "لأصبح العيش على القمر ممكناً",
                        "لظهرت حياة نباتية على القمر",
                        "لأصبح القمر أكثر لمعاناً في الليل",
                        "جميع ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو كانت الحيوانات تتكلم جميعها؟",
                    options: [
                        "لأصبحت حدائق الحيوان مختلفة تماماً",
                        "لتغيرت صناعة الغذاء",
                        "لأصبحت العلاقة بين الإنسان والحيوان أكثر تعقيداً",
                        "كل ما سبق"
                    ],
                    correct: 3
                },
                {
                    question: "ماذا لو كانت الشمس خضراء اللون؟",
                    options: [
                        "لأصبحت النباتات بلون مختلف",
                        "لتغيرت ألوان السماء والغيوم",
                        "لأثر ذلك على نفسية البشر",
                        "جميع ما سبق"
                    ],
                    correct: 3
                }
            ],
            // المراحل من 3 إلى 15 بنفس النمط (يمكن استكمالها)
            stage3: [
                // 10 أسئلة للمرحلة 3
            ],
            stage4: [
                // 10 أسئلة للمرحلة 4
            ],
            stage5: [
                // 10 أسئلة للمرحلة 5
            ],
            stage6: [
                // 10 أسئلة للمرحلة 6
            ],
            stage7: [
                // 10 أسئلة للمرحلة 7
            ],
            stage8: [
                // 10 أسئلة للمرحلة 8
            ],
            stage9: [
                // 10 أسئلة للمرحلة 9
            ],
            stage10: [
                // 10 أسئلة للمرحلة 10
            ],
            stage11: [
                // 10 أسئلة للمرحلة 11
            ],
            stage12: [
                // 10 أسئلة للمرحلة 12
            ],
            stage13: [
                // 10 أسئلة للمرحلة 13
            ],
            stage14: [
                // 10 أسئلة للمرحلة 14
            ],
            stage15: [
                // 10 أسئلة للمرحلة 15
            ]
        };

        // متغيرات اللعبة
        let currentStage = 1;
        let currentQuestion = 0;
        let score = 0;
        let selectedOption = null;
        let questions = [];
        
        // عناصر DOM
        const stageTitle = document.getElementById('stageTitle');
        const progressBar = document.getElementById('progressBar');
        const questionText = document.getElementById('questionText');
        const optionsContainer = document.getElementById('optionsContainer');
        const nextBtn = document.getElementById('nextBtn');
        const resultContainer = document.getElementById('resultContainer');
        const resultTitle = document.getElementById('resultTitle');
        const resultScore = document.getElementById('resultScore');
        const resultMessage = document.getElementById('resultMessage');
        const restartBtn = document.getElementById('restartBtn');
        const stagesBtn = document.getElementById('stagesBtn');
        const backBtn = document.getElementById('backBtn');
        
        // تهيئة اللعبة
        function initGame() {
            const urlParams = new URLSearchParams(window.location.search);
            currentStage = parseInt(urlParams.get('stage')) || 1;
            stageTitle.textContent = `المرحلة ${currentStage}`;
            
            // تحميل أسئلة المرحلة
            questions = allQuestions[`stage${currentStage}`] || [];
            
            // إعادة تعيين المتغيرات
            currentQuestion = 0;
            score = 0;
            selectedOption = null;
            
            // إخفاء نتيجة المرحلة
            resultContainer.style.display = 'none';
            
            // عرض السؤال الأول
            showQuestion();
        }
        
        // عرض السؤال الحالي
        function showQuestion() {
            if (currentQuestion >= questions.length) {
                endStage();
                return;
            }
            
            const question = questions[currentQuestion];
            questionText.textContent = question.question;
            
            optionsContainer.innerHTML = '';
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    ${option}
                    <i class="far fa-circle option-icon"></i>
                `;
                
                optionElement.addEventListener('click', () => selectOption(index));
                optionsContainer.appendChild(optionElement);
            });
            
            // تحديث شريط التقدم
            updateProgress();
            
            // إخفاء زر التالي
            nextBtn.classList.add('hidden');
        }
        
        // اختيار الإجابة
        function selectOption(index) {
            if (selectedOption !== null) return;
            
            selectedOption = index;
            const correctIndex = questions[currentQuestion].correct;
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, i) => {
                if (i === correctIndex) {
                    option.classList.add('correct');
                    option.querySelector('.option-icon').className = 'fas fa-check option-icon';
                } else if (i === index && i !== correctIndex) {
                    option.classList.add('wrong');
                    option.querySelector('.option-icon').className = 'fas fa-times option-icon';
                }
            });
            
            // زيادة النقاط إذا كانت الإجابة صحيحة
            if (index === correctIndex) {
                score++;
            }
            
            // إظهار زر التالي
            nextBtn.classList.remove('hidden');
        }
        
        // الانتقال للسؤال التالي
        function nextQuestion() {
            currentQuestion++;
            selectedOption = null;
            showQuestion();
        }
        
        // تحديث شريط التقدم
        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
        }
        
        // انتهاء المرحلة
        function endStage() {
            // حفظ التقدم في localStorage
            saveProgress();
            
            // عرض النتيجة
            resultScore.textContent = `لقد حصلت على ${score} من ${questions.length}`;
            
            // تحديد الرسالة والعنوان حسب الأداء
            if (score === questions.length) {
                resultTitle.textContent = "أداء مذهل!";
                resultMessage.textContent = "لقد أجبت على جميع الأسئلة بشكل صحيح. أنت خبير في سيناريوهات 'ماذا لو'!";
            } else if (score >= questions.length * 0.7) {
                resultTitle.textContent = "عمل رائع!";
                resultMessage.textContent = "أداء ممتاز! لديك معرفة قوية بهذه المرحلة من الأسئلة.";
            } else if (score >= questions.length * 0.5) {
                resultTitle.textContent = "ليس سيئاً!";
                resultMessage.textContent = "يمكنك تحسين أدائك بالمحاولة مرة أخرى. حاول التركيز أكثر في المرات القادمة!";
            } else {
                resultTitle.textContent = "حاول مرة أخرى!";
                resultMessage.textContent = "يبدو أنك بحاجة إلى المزيد من المعرفة. لا تقلق، يمكنك إعادة المحاولة!";
            }
            
            resultContainer.style.display = 'block';
        }
        
        // حفظ التقدم
        function saveProgress() {
            let progress = JSON.parse(localStorage.getItem('stagesProgress')) || [];
            
            if (!progress.includes(currentStage)) {
                progress.push(currentStage);
                localStorage.setItem('stagesProgress', JSON.stringify(progress));
            }
        }
        
        // إعادة تشغيل المرحلة
        function restartStage() {
            initGame();
        }
        
        // العودة إلى قائمة المراحل
        function goToStages() {
            window.location.href = 'stages.html';
        }
        
        // الأحداث
        nextBtn.addEventListener('click', nextQuestion);
        restartBtn.addEventListener('click', restartStage);
        stagesBtn.addEventListener('click', goToStages);
        backBtn.addEventListener('click', goToStages);
        
        // بدء اللعبة عند تحميل الصفحة
        window.addEventListener('load', initGame);
    </script>
</body>
</html>